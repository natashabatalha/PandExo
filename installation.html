

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pre-installation Data Download &mdash; PandExo  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PandExo  documentation" href="index.html"/>
        <link rel="next" title="JWST Tutorial" href="tutorialjwst.html"/>
        <link rel="prev" title="Getting Started" href="includeme.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PandExo
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="includeme.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pre-installation Data Download</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#jwst-reference-data">JWST Reference Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stellar-seds">Stellar SEDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pandexo-startup-bash-script">PandExo startup bash script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#installation-for-users-with-conda">Installation for Users With Conda</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#coords-py-typeerror-float-object-cannot-be-interpreted-as-an-index">COORDS.PY: TypeError: ‘float’ object cannot be interpreted as an index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#installation-for-users-with-pip">Installation for Users With PIP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#set-environment">Set Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">COORDS.PY: TypeError: ‘float’ object cannot be interpreted as an index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#todos">TODOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorialjwst.html">JWST Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwstinput.html">Possible Instrument Input Params</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwstdict.html">Py Dict Structure of JWST Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorialhst.html">HST Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="engine.html">The Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PandExo</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Pre-installation Data Download</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before reading further, if you do not wish to install PandExo,there is an online version of the code here here at <a class="reference external" href="http://pandexo.science.psu.edu:1111">PSU Science</a> or here at NASA GSFC.</p>
</div>
<p>Before we start, the scripts written to install PandExo assume the user has installed <a class="reference external" href="https://www.continuum.io/downloads">Anaconda</a>. For diehard pip users, know that STScI tools will be only distributed on conda so PandExo will not be the only package to use it.</p>
<p>If you are dead set against it you will need to follow the installation guidelines ‘here &lt;<a class="reference external" href="https://natashabatalha.github.io/PandExo/installation.html">https://natashabatalha.github.io/PandExo/installation.html</a>&gt;`_.</p>
<div class="section" id="pre-installation-data-download">
<h1>Pre-installation Data Download<a class="headerlink" href="#pre-installation-data-download" title="Permalink to this headline">¶</a></h1>
<p>ss mentioned, the user must provide their own reference data files in order for the engine to understand the instrument with which the calculations will be performed. First step to getting PandExo running is downloading four files. Download them and put them in the same directory.</p>
<div class="section" id="jwst-reference-data">
<h2>JWST Reference Data<a class="headerlink" href="#jwst-reference-data" title="Permalink to this headline">¶</a></h2>
<p>For JWST, the user may download the required reference data <a class="reference external" href="http://ssb.stsci.edu/pandeia/engine/1.0/pandeia_data-1.0.tar.gz">here</a>. Unpack and store the data in a choice location.</p>
</div>
<div class="section" id="stellar-seds">
<h2>Stellar SEDs<a class="headerlink" href="#stellar-seds" title="Permalink to this headline">¶</a></h2>
<p>Likewise, the user may wish to install specific data for use with the PySynPhot package Pandeia uses. We will only be using the Phoenix stellar atlas, which can be downloaded <a class="reference external" href="ftp://ftp.stsci.edu/cdbs/tarfiles/synphot5.tar.gz">here</a>.</p>
</div>
<div class="section" id="pandexo-startup-bash-script">
<h2>PandExo startup bash script<a class="headerlink" href="#pandexo-startup-bash-script" title="Permalink to this headline">¶</a></h2>
<p>A startup script and a python test script was created to do an automatic install of PandExo. You can download both of them from a google drive located <a class="reference external" href="https://drive.google.com/open?id=0ByRvbM3zW0d-d2xoSmNMc1RtdTQ">here</a>.</p>
</div>
</div>
<div class="section" id="installation-for-users-with-conda">
<h1>Installation for Users With Conda<a class="headerlink" href="#installation-for-users-with-conda" title="Permalink to this headline">¶</a></h1>
<p>Open up the file <cite>pandexo.sh</cite>. There are two lines in the beginning which tell PandExo where your reference data will go. Currently this script is set to unpack and store the reference files in your HOME directory.</p>
<p>If you are not okay with it, <strong>change</strong> $HOME in the first two lines of pandexo.sh to whatever you want the data to be.</p>
<p>Then run</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sh pandexo.sh
Starting TEST run
Running Single Case <span class="k">for</span>: NIRSpec G140H
Optimization Reqested: Computing Duty Cycle
Finished Duty Cycle Calc
Starting Out of Transit Simulation
End out of Transit
Starting In Transit Simulation
End In Transit
SUCCESS
</pre></div>
</div>
<p>Hopefully you have had success but if not the most likely error you will get is the following:</p>
<div class="section" id="coords-py-typeerror-float-object-cannot-be-interpreted-as-an-index">
<h2>COORDS.PY: TypeError: ‘float’ object cannot be interpreted as an index<a class="headerlink" href="#coords-py-typeerror-float-object-cannot-be-interpreted-as-an-index" title="Permalink to this headline">¶</a></h2>
<p>This is an error within Pandeia, which has not yet been fixed by STScI folk. You can easily fix it by finding where the file /pandeia/engine/coords.py is and changing line 36:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ones</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
</pre></div>
</div>
<p>To this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ones</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">ny</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">nx</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="installation-for-users-with-pip">
<h1>Installation for Users With PIP<a class="headerlink" href="#installation-for-users-with-pip" title="Permalink to this headline">¶</a></h1>
<p>You should have already downloaded the two data tar files, pandexo.sh and run_test.py. If not, go back to <cite>Pre Installation Data Download</cite>.</p>
<p>Then, start by installing PandExo, which should automatically isntall Pandeia and other dependencies</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install pandexo.engine
</pre></div>
</div>
<p>OR Download PandExo’s repository via Github:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone --recursive https://github.com/natashabatalha/pandexo
<span class="nb">cd</span> pandexo
python setup.py install
</pre></div>
</div>
<div class="section" id="set-environment">
<h2>Set Environment<a class="headerlink" href="#set-environment" title="Permalink to this headline">¶</a></h2>
<p>Open up the file <cite>pandexo.sh</cite>. The first two lines in the beginning tell PandExo where your reference data will go via the variable <cite>$USRDIR</cite>. Currently <cite>$USRDIR</cite> is equal to your HOME directory, meaning your big data files will be untarred there.</p>
<p>If you are not okay with it, <strong>change</strong> $HOME in the first two lines of pandexo.sh to whatever you want the data to be. It should look like this:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">USRDIR</span><span class="o">=</span>/I/Want/My/Data/Here
<span class="nb">echo</span> <span class="s1">&#39;USRDIR=/I/Want/My/Data/Here&#39;</span> &gt;&gt;~/.bash_profile
</pre></div>
</div>
<p>NEXT, since pandexo.sh is set for conda users, delete everything after line 22. We will have to do these manually since we don’t have conda. Once you have done these two things you can go ahead and run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sh pandexo.sh
</pre></div>
</div>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>PyFFTW is needed to run PandExo. In order to run PyFFTW you need to also isntall fftw. To do so, it is necessary to do so through Homebrew, if you do not have conda.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>brew install fftw
pip install pyfftw
</pre></div>
</div>
<p>Lastly, Python 2.7 users will need to install multiprocessing:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install multiprocessing
</pre></div>
</div>
<p>Finally try to run the test file to see if there are any additional problems:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python run_test.py
Starting TEST run
Running Single Case <span class="k">for</span>: NIRSpec G140H
Optimization Reqested: Computing Duty Cycle
Finished Duty Cycle Calc
Starting Out of Transit Simulation
End out of Transit
Starting In Transit Simulation
End In Transit
SUCCESS
</pre></div>
</div>
<p>Hopefully you have had success but if not the most likely error you will get is the following:</p>
</div>
<div class="section" id="id3">
<h2>COORDS.PY: TypeError: ‘float’ object cannot be interpreted as an index<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>This is an error within Pandeia, which has not yet been fixed by STScI folk. You can easily fix it by finding where the file /pandeia/engine/coords.py is and changing line 36:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ones</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">ny</span><span class="p">,</span> <span class="n">nx</span><span class="p">))</span>
</pre></div>
</div>
<p>To this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ones</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">ny</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">nx</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="todos">
<h1>TODOS<a class="headerlink" href="#todos" title="Permalink to this headline">¶</a></h1>
<ol class="arabic simple">
<li>Add error messages to the pandas output page</li>
</ol>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorialjwst.html" class="btn btn-neutral float-right" title="JWST Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="includeme.html" class="btn btn-neutral" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Natasha Batalha;Kevin Stevenson.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>